---
layout: "../../layouts/BlogPost.astro"
title: "Generate pydantic models from JSON schema"
datetime: "2022-12-29"
tags: [json-schema, pydantic, python]
---


Today I learnt that you can generate [pydantic](https://docs.pydantic.dev/) models from [JSON schema defintions](https://json-schema.org/). 
First you install the `datamodel-code-generator` from pydantic:(described [here](https://docs.pydantic.dev/datamodel_code_generator/)).

```
pip install datamodel-code-generator
```



Let's say I have the file `event.schema.json`
```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Event",
  "type": "object",
  "properties": {
    "event_id": {
      "type": "string",
      "description": "The unique identifier for the event"
    },
    "event_type": {
      "type": "string",
      "description": "The type of event"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "The timestamp for when the event occurred"
    },
    "person_data": {
      "$ref": "#/definitions/Person"
    },
    "data": {
      "type": "object",
    }
  },
  "required": [
    "event_id",
    "event_type",
    "timestamp",
    "data"
  ],
  "definitions": {
    "Person": {
      "properties": {
        "name": {
          "type": "string"
        },
        "age": {
          "type": "integer"
        }
      },
      "required": [
        "name",
        "age"
      ]
    }
  }
}
```

Then we can generate the model using:

```
datamodel-codegen  --input event.schema.json --input-file-type jsonschema --output model.py
```

**Result:**

```py
# generated by datamodel-codegen:
#   filename:  event.schema.json
#   timestamp: 2022-12-29T12:25:36+00:00

from __future__ import annotations

from datetime import datetime
from typing import Any, Dict, Optional

from pydantic import BaseModel, Field


class Person(BaseModel):
    name: str
    age: int


class Event(BaseModel):
    event_id: str = Field(..., description='The unique identifier for the event')
    event_type: str = Field(..., description='The type of event')
    timestamp: datetime = Field(
        ..., description='The timestamp for when the event occurred'
    )
    person_data: Optional[Person] = None
    data: Dict[str, Any]

```

# ðŸˆ¸
